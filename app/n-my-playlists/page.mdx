import { Callout } from "nextra/components"

# 14. My playlists

–°–µ–π—á–∞—Å –≤—Å–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞—é—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ `('/playlists')`.
–ù–æ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –≤–∏–¥–µ—Ç—å –Ω–µ –∞–±—Å–æ–ª—é—Ç–Ω–æ –≤—Å–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã, –∞ —Ç–æ–ª—å–∫–æ —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Å–æ–∑–¥–∞–ª–∏ —Å–∞–º–∏. –î–ª—è —ç—Ç–æ–≥–æ —É –Ω–∞—Å –µ—Å—Ç—å
—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è.

–ß—Ç–æ–±—ã –ø–æ–ø–∞—Å—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Ñ–∏–ª—è –º—ã –ø–µ—Ä–µ—Ö–æ–¥–∏–º –ø–æ —Å—Å—ã–ª–∫–µ, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `Header.tsx`.
–î–∞–≤–∞–π—Ç–µ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç —Ç–æ–∂–µ —Å—Ä–∞–∑—É –ø–µ—Ä–µ–¥–µ–ª–∞–µ–º –∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Ñ–∏–ª—è –±—É–¥–µ–º –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –ø–æ –∫–ª–∏–∫—É –Ω–∞ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## Playlists by userId

- `Header.tsx`

```tsx filename="Header.tsx" {5, 16}
const navItems = [
  { to: Path.Main, label: "Main" },
  { to: Path.Playlists, label: "Playlists" },
  { to: Path.Tracks, label: "Tracks" },
  // ‚ùå { to: Path.Profile, label: "Profile" }
]

export const Header = () => {
  /*...*/

  return (
    <header className={s.container}>
      {/*...*/}
      {data && (
        <div className={s.loginContainer}>
          <Link to={Path.Profile}>{data.login}</Link>
          <button onClick={logoutHandler}>logout</button>
        </div>
      )}
      {!data && <Login />}
    </header>
  )
}
```

<Callout type={"info"}>
  –ß—Ç–æ–±—ã –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç—ã –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å `userId` –≤ query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

- [playlists
  endpoints](https://musicfun.it-incubator.app/api#/Playlists%20Public/PlaylistsPublicController_getPlaylists)

</Callout>

<Callout type={"info"}>
  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –Ω–µ –±–æ–ª–µ–µ 10 –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤. –ü–æ—ç—Ç–æ–º—É –ø–∞–≥–∏–Ω–∞—Ü–∏—é –∏ –ø–æ–∏—Å–∫ –¥–µ–ª–∞—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ—Ñ–∏–ª—è –Ω–µ—Ç—É —Å–º—ã—Å–ª–∞.
</Callout>

- `ProfilePage.tsx`

```tsx filename="ProfilePage.tsx"
export const ProfilePage = () => {
  const { data: meResponse } = useGetMeQuery()
  const { data: playlistsResponse, isLoading } = useFetchPlaylistsQuery({ userId: meResponse?.userId })

  return (
    <div>
      <h1>{meResponse?.login} page</h1>
      <PlaylistsList playlists={playlistsResponse?.data || []} isPlaylistsLoading={isLoading} />
    </div>
  )
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ—Ñ–∏–ª—è –≤–∏–¥–∏–º —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –ø–ª–µ–π–ª–∏—Å—Ç—ã üöÄ

## CreatePlaylistForm to profile

–°–æ–≥–ª–∞—Å–Ω–æ [–¥–∏–∑–∞–π–Ω—É](https://www.figma.com/design/AxTPd4AS8oAgdEF4dDgLis/MusicFun?node-id=24797-11173&t=15nOmL4fCTVjez2X-0) –ø–ª–µ–π–ª–∏—Å—Ç—ã –º—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ—Ñ–∏–ª—è, –∞ –Ω–µ –Ω–∞ –æ–±—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ, –ø–æ—ç—Ç–æ–º—É –±—ã—Å—Ç—Ä–æ
–ø–æ–ø—Ä–∞–≤–∏–º —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç

- `ProfilePage.tsx`

```tsx filename="ProfilePage.tsx" {9}
export const ProfilePage = () => {
  const { data: meResponse } = useGetMeQuery()
  const { data: playlistsResponse, isLoading } = useFetchPlaylistsQuery({ userId: meResponse?.userId })

  return (
    <>
      <h1>{meResponse?.login} page</h1>
      <div className={s.container}>
        <CreatePlaylistForm />
        <PlaylistsList playlists={playlistsResponse?.data || []} isPlaylistsLoading={isLoading} />
      </div>
    </>
  )
}
```

- `ProfilePage.module.css`

```css filename="ProfilePage.module.css"
.container {
  display: flex;
  flex-direction: column;
  gap: 30px;
}
```

<Callout type={"warning"}>–£–¥–∞–ª–∏—Ç–µ `CreatePlaylistForm` —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã `PlaylistsPage.tsx`</Callout>

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** —Ç–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç—ã –º–æ–∂–µ–º —Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ—Ñ–∏–ª—è üöÄ

## Skip

–ï—Å–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ—Ñ–∏–ª—è –æ—Ç–∫—Ä—ã—Ç—å developer tools –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã —É—Ö–æ–¥—è, —Ç–æ –≤—ã —É–≤–∏–¥–µ—Ç–µ —á—Ç–æ –∑–∞ –ø–ª–µ–π–ª–∏—Å—Ç–∞–º–∏
—É—Ö–æ–¥–∏—Ç 2 –∑–∞–ø—Ä–æ—Å–∞, –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ:

- –ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –±–µ–∑ query –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ `playlists`
- –≤—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å —Å userId `playlists?userId=1`

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –∏ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ª–∏—à–Ω–∏–π –∑–∞–ø—Ä–æ—Å –Ω–∞ –±–µ–∫–µ–Ω–¥ –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è
[skip](https://redux-toolkit.js.org/rtk-query/usage/conditional-fetching)

<Callout type={"info"}>
  –ó–∞–ø—Ä–æ—Å—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ö—É–∫–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏–Ω–∞—é—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è.
  –û–¥–Ω–∞–∫–æ –±—ã–≤–∞—é—Ç —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ—Ç–ª–æ–∂–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ.
  `RTK Query` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —É—Å–ª–æ–≤–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–∞–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.

–î–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±—É–ª–µ–≤–æ —Å–≤–æ–π—Å—Ç–≤–æ `skip` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ö—É–∫–∞.

</Callout>

```tsx filename="ProfilePage.tsx" /skip/ /isMeLoading/
export const ProfilePage = () => {
  const { data: meResponse, isLoading: isMeLoading } = useGetMeQuery()

  const { data: playlistsResponse, isLoading } = useFetchPlaylistsQuery(
    { userId: meResponse?.userId },
    { skip: !meResponse?.userId },
  )

  if (isLoading || isMeLoading) return <h1>Skeleton loader...</h1>

  return (
    <>
      <h1>{meResponse?.login} page</h1>
      <div className={s.container}>
        <CreatePlaylistForm />
        <PlaylistsList playlists={playlistsResponse?.data || []} isPlaylistsLoading={isLoading || isMeLoading} />
      </div>
    </>
  )
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** —Ç–µ–ø–µ—Ä—å —É—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ 1 –∑–∞–ø—Ä–æ—Å –∑–∞ –ø–ª–µ–π–ª–∏—Å—Ç–∞–º–∏ üöÄ

## Redirect

–ï—Å–ª–∏ –≤—ã –≤—ã–ª–æ–≥–∏–Ω–∏—Ç–µ—Å—å –∏ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Ñ–∏–ª—è, —Ç–æ –≤—ã –Ω–µ —É–≤–∏–¥–∏—Ç–µ —Å–≤–æ–∏—Ö –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤, —Ç.–∫. me –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –ø–∞–¥–∞—Ç—å —Å
401 –æ—à–∏–±–∫–æ–π.

–ü–æ—ç—Ç–æ–º—É –ª–æ–≥–∏—á–Ω–æ –µ—Å–ª–∏ –º—ã –≤—ã–ª–æ–≥–∏–Ω–µ–Ω—ã, –Ω–µ –ø—É—Å–∫–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Ñ–∏–ª—è, –∞—Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç—å –µ–≥–æ –Ω–∞ –≥–ª–∞–≤–Ω—É—é
(–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –±—É–¥–µ–º —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—É–±–ª–∏—á–Ω—ã—Ö –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤)

<Callout type={'info'} emoji={'üîó'}>

[Navigate](https://reactrouter.com/api/components/Navigate)

</Callout>

```tsx filename="ProfilePage.tsx" {6}
import { Navigate } from "react-router"

export const ProfilePage = () => {
  /*...*/

  if (!isMeLoading && !meResponse) return <Navigate to={Path.Playlists} />

  /*...*/
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–ª–æ–≥–∏–Ω–µ–Ω –æ–Ω –±—É–¥–µ—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç–Ω—É—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—É–±–ª–∏—á–Ω—ã—Ö –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ üöÄ
