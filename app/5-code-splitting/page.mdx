# 5. Code Splitting

`RTK Query` –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–º–µ–Ω—å—à–∏—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞, –ø–æ–∑–≤–æ–ª—è—è –¥–æ–±–∞–≤–ª—è—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ
–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞. [Code Splitting](https://redux-toolkit.js.org/rtk-query/usage/code-splitting) –≤ `RTK Query`
–¥–µ–ª–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–æ–ª–µ–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º, –≥–∏–±–∫–∏–º –∏ —É–¥–æ–±–Ω—ã–º –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º API
–∏ –≤ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ `Code Splitting`:**

1. **–£–º–µ–Ω—å—à–µ–Ω–∏–µ –æ–±—ä–µ–º–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ JavaScript-–∫–æ–¥–∞**: –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —á–∞—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è,
   —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞ –∏ —Å–æ–∫—Ä–∞—â–∞–µ—Ç—Å—è –≤—Ä–µ–º—è –Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏;
2. **–ü–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: –±—Ä–∞—É–∑–µ—Ä—É —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–µ–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞;
3. **–≠–∫–æ–Ω–æ–º–∏—è —Å–µ—Ç–µ–≤—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤**: –ª–æ–≥–∏–∫–∞ API-–∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è;
4. **–ü–æ–≤—ã—à–µ–Ω–∏–µ –≥–∏–±–∫–æ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å API-—Å–ª–∞–π—Å—ã, –Ω–µ –≤–ª–∏—è—è –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..

–ú–µ—Ç–æ–¥ `injectEndpoints` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–ª–ª–µ–∫—Ü–∏—é —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, –∞ —Ç–∞–∫–∂–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `overrideExisting`.
–í—ã–∑–æ–≤ `injectEndpoints` –¥–æ–±–∞–≤–∏—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ `API` –∏ –≤–µ—Ä–Ω—ë—Ç —ç—Ç–æ –∂–µ `API` —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–ª—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `app/api/baseApi.ts` —Å –æ–¥–Ω–∏–º –ø—É—Å—Ç—ã–º —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Å—Ä–µ–∑–∞ `API` - `baseApi`:

```ts filename="src/app/baseApi.ts"
import { createApi, fetchBaseQuery } from "@reduxjs/toolkit/query/react"

export const baseApi = createApi({
  reducerPath: "baseApi",
  tagTypes: ["Playlist"],
  baseQuery: fetchBaseQuery({
    baseUrl: import.meta.env.VITE_BASE_URL,
    headers: {
      "API-KEY": import.meta.env.VITE_API_KEY,
    },
    prepareHeaders: (headers) => {
      headers.set("Authorization", `Bearer ${import.meta.env.VITE_ACCESS_TOKEN}`)
      return headers
    },
  }),
  endpoints: () => ({}),
})
```

2. –í–Ω–µ–¥—Ä–∏—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã `playlistsApi` –≤ `baseApi`, –∏—Å–ø–æ–ª—å–∑—É—è `injectEndpoints`:

```ts filename="todolistsApi.ts" /baseApi.injectEndpoints/
export const playlistsApi = baseApi.injectEndpoints({
  endpoints: (build) => ({
    /*...*/
  }),
})
```

3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ `baseApi` –∫ `store`:

```ts filename="store.ts" {7, 9}
import { configureStore } from "@reduxjs/toolkit"
import { setupListeners } from "@reduxjs/toolkit/query"
import { baseApi } from "../api/baseApi.ts"

export const store = configureStore({
  reducer: {
    [baseApi.reducerPath]: baseApi.reducer,
  },
  middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(baseApi.middleware),
})

setupListeners(store.dispatch)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞–µ—Ç `Code Splitting` üöÄ
